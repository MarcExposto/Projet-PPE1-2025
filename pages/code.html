<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@1.0.4/css/bulma.min.css">
    <style>
    :root {
    --bulma-primary-h: 194deg;
    --bulma-link-h: 178deg;
    --bulma-link-l: 37%;
    --bulma-info-h: 226deg;
    --bulma-danger-l: 56%;
    --bulma-scheme-h: 278;
    --bulma-light-l: 85%;
    }
    </style>

    <title>Explication de la partie code</title>
  </head>
  <body>
    <!-- Section avec le menu -->
    <nav class="navbar has-shadow is-info">
      <div class="navbar-brand m1">
        <a href="../index.html" class="navbar-item">
          <h1 class="title is-4">PPE</h1>
        </a>
      </div>
      <div class="navbar-menu">
        <div class="navbar-start">
          <a href="../index.html" class="navbar-item">Accueil</a>
          <div class="navbar-item has-dropdown is-hoverable">
            <a class="navbar-link">
              Tableaux
            </a>
            <div class="navbar-dropdown">
              <a class="navbar-item" href="../tableaux/fr.html"> Tableau Français </a>
              <a class="navbar-item" href="../tableaux/en.html"> Tableau Anglais </a>
            </div>
          </div>
          <div class="navbar-item has-dropdown is-hoverable">
            <a class="navbar-link">
              Concordanciers
            </a>
            <div class="navbar-dropdown">
              <a class="navbar-item" href="../concordances/concordancier_fr.html"> Concordancier confinement </a>
              <a class="navbar-item" href="../concordances/concordancier_en.html"> Concordancier lockdown </a>
            </div>
          </div>
          <div class="navbar-item has-dropdown is-hoverable">
            <a class="navbar-link">
              Coocurrences
            </a>
            <div class="navbar-dropdown">
              <a class="navbar-item" href="../coocurrents/fr.html"> Tokens coocurrents de confinement </a>
              <a class="navbar-item" href="../coocurrents/en.html"> Tokens coocurrents de lockdown </a>
              <a class="navbar-item" href="../coocurrents/fr_bigrammes.html"> Bigrammes coocurrents de confinement </a>
              <a class="navbar-item" href="../coocurrents/en_bigrammes.html"> Bigrammes coocurrents de lockdown </a>
            </div>
          </div>
          <div class="navbar-item has-dropdown is-hoverable">
            <a class="navbar-link">
              Analyses
            </a>
            <div class="navbar-dropdown">
              <a class="navbar-item" href="../pages/anafr.html"> Analyse Français </a>
              <a class="navbar-item" href="../pages/anen.html"> Analyse Anglais </a>
              <a class="navbar-item" href="../pages/anmu.html"> Analyse Multingue </a>
            </div>
          </div>
          <a href="../pages/equipe.html" class="navbar-item">Equipe</a>
          <a href="../pages/code.html" class="navbar-item">Code</a>
        </div>
      </div>
    </nav>
    <!-- Section avec le code et explication -->
    <div class="container mb-5">
      <div class="content">
        <h3 class="title is-5">Les scripts du projet </h3>
        <p>
          La partie code du projet s'articule autour de deux scripts : 
          pipeline.sh, qui gère les traitements sur les données de l'aspiration des pages au calcul des coocurrents et à la génération du nuage de mots;
          et generer_pages.sh, qui appelle pipeline.sh pour générer les tableaux html, les concordanciers et les tableaux des coocurrents.
        </p>
        <p>
          Ce découpage avait pour but de séparer le traitement des données de la génération du code html afin de ne pas avoir du code html écrit en dur dans le script traitant les données.
        </p>
        <p>
          Pour ce faire, tout les tableaux générés lors de l'execution de pipeline.sh sont au format tsv.
          Ces tableaux sont ensuite convertis en tableaux html grace au script awk tsv_vers_html.awk, puis le template tableau.html est rempli par le contenu du tableau grace au script formater_page.awk afin de générer une page html complète.
        </p>
      </div>
    </div>
    <div class="container mb-5">
      <div class="content">
        <h3 class="title is-5">Étapes de la chaine de traitement</h3>
        <p>
          La chaine de traitement a été au maximum découpée en scripts dédiés à une seule tache afin d'en facilité le débuggage.
          Ces scripts sont placés dans le dossier "programmes/scripts"
        </p>
        <p>
          Pour chaque url, 
        </p>
        <ol>
          <li>robots.sh est appelé afin de s'assurer qu'il est autorisé d'aspirer le contenu de la page;</li>
          <li>curl aspire la page;</li>
          <li>convert_utf-8.sh converti la page aspirée en utf-8 si ce n'est pas son encodage d'origine;</li>
          <li>text_dump.sh extrait le texte de la page grace à lynx (la sortie par défaut de lynx est encodée en ISO-8859-1 et la spécification de l'encodage de sortie avec -display_charset=UTF-8 a causé des bugs);</li>
          <li>convert_utf-8.sh converti le dump en utf-8;</li>
          <li>tokenizer.sh et bigrammes.sh tokenisent le dump repectivement en unigrammes et en bigrammes avec des scripts awk;</li>
          <li>egrep extrait le contexte du mot cible sur 4 lignes avant et après ses occurences;</li>
          <li>concordances.sh génère un concordancier au format tsv.</li>
        </ol>
        <p>
          Une fois que toutes les urls ont été parsées, le script appelle coocurrents.py sur les fichiers tokenisés en unigrammes et en bigrammes.
        </p>
        <p>
          Ce script génère les tableaux des unigrammes et bigrammes coocurrents du mots cible.
        </p>
        <p>
          Enfin le programme wordcloud_cli génère les nuages de mots.
        </p>
      </div>
    </div>
</body>
<!-- Section avec le footer -->
<footer class="footer" style="bottom:0; left: 0; right: 0">
  <div class="content has-text-centered">
    <p>
      Copyright © L'équipe du groupe de
    <a href="https://github.com/MarcExposto/Projet-PPE1-2025">PPE1</a>
    </p>
    <p>
        Licence Creative Commons :
      <a href="https://creativecommons.org/licenses/by-nc-sa/4.0//"
        >CC BY NC SA 4.0
    </a>
    </p>
  </div>
</footer>
</html>
